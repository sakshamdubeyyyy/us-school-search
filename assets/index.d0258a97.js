var W=Object.defineProperty;var M=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var F=(n,o,t)=>o in n?W(n,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[o]=t,k=(n,o)=>{for(var t in o||(o={}))q.call(o,t)&&F(n,t,o[t]);if(M)for(var t of M(o))H.call(o,t)&&F(n,t,o[t]);return n};import{r as m,j as h,V as P,a as e,I as K,S as N,B as C,L as G,b as z,T as w,F as B,c as A,A as Z,d as _,u as $,M as V,e as Q,f as J,g as X,H as Y,h as ee,i as te,k as re,l as oe,R as T,m as se,n as ne,o as j,p as le,C as ae,q as ie,s as ce,t as v,v as de,w as O,x as ue,y as he,z as pe,D as fe}from"./vendor.20428b36.js";const Se=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}};Se();function me({placeholder:n,searchFunction:o,renderItem:t,getUniqueKey:c,onSelect:s,deduplicate:l},d){const[r,p]=m.exports.useState(""),[f,b]=m.exports.useState([]),[g,y]=m.exports.useState(!1),[E,a]=m.exports.useState(!1),[u,x]=m.exports.useState(!1);return m.exports.useImperativeHandle(d,()=>({reset:()=>{p(""),b([]),a(!1),x(!1)}})),m.exports.useEffect(()=>{const i=setTimeout(async()=>{if(r.trim().length>=3&&!u){y(!0);try{let S=await o(r);l&&(S=l(S)),b(S),a(!0)}catch(S){console.error("Error in dropdown search:",S)}finally{y(!1)}}else b([]),a(!1)},300);return()=>clearTimeout(i)},[r,u,o]),h(P,{align:"stretch",position:"relative",width:"100%",children:[e(K,{placeholder:n,value:r,onChange:i=>{p(i.target.value),x(!1)},onFocus:()=>{r.length>=3&&!u&&a(!0)}}),g&&e(N,{size:"sm",mt:2}),E&&e(C,{position:"absolute",top:"100%",bg:"white",shadow:"md",border:"1px solid #ccc",borderRadius:"md",width:"100%",zIndex:10,maxHeight:"200px",overflowY:"auto",children:e(G,{spacing:0,children:f.length>0?f.map(i=>e(z,{px:3,py:2,_hover:{bg:"gray.100",cursor:"pointer"},onClick:()=>{s(i),p(c(i)),x(!0),a(!1)},children:t(i)},c(i))):e(z,{px:3,py:2,children:e(w,{children:"No results found"})})})})]})}const U=m.exports.forwardRef(me),be=async n=>{let o=`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=UPPER(NAME) LIKE UPPER('%${n}%')&outFields=*&outSR=4326&f=json`,t=[],c=await(await fetch(o)).json();return t=[...c.features?c.features.map(s=>s.attributes):[]],t},R=async(n,o)=>{let t=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Private_School_Locations_Current/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${n}%')${o?`%20AND%20LEAID%20%3D%20'${o}'`:""}&outFields=*&outSR=4326&f=json`,c=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Public_School_Location_201819/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${n}%')${o?`%20AND%20LEAID%20%3D%20'${o}'`:""}&outFields=*&outSR=4326&f=json`,s=[],l=await(await fetch(t)).json(),d=await(await fetch(c)).json();return s=[...l.features?l.features.map(r=>r.attributes):[],...d.features?d.features.map(r=>r.attributes):[]],s},ge=({selectedCity:n,onReset:o,onCitySelect:t,onSchoolSelect:c,citySearchRef:s,schoolSearchRef:l})=>h(B,{children:[n&&e(A,{onClick:o,variant:"solid",size:"sm",colorScheme:"pink",leftIcon:e(Z,{size:18}),children:"Back to All Schools"}),h(_,{w:"100%",direction:{base:"column",md:"row"},gap:6,justify:"space-between",align:"center",children:[e(C,{flex:"1",maxW:{base:"100%",md:"48%"},bg:"white",p:4,rounded:"xl",boxShadow:"lg",children:e(U,{ref:s,placeholder:"Search by district...",searchFunction:async r=>{const[p,f]=await Promise.all([be(r),R(r)]),b=p.map(a=>{var u;return(u=a.LCITY)==null?void 0:u.trim()}).filter(Boolean),g=f.map(a=>{var u;return(u=a.CITY)==null?void 0:u.trim()}).filter(Boolean),y=[...b,...g];return[...new Set(y)].map(a=>({LCITY:a}))},onSelect:r=>t(r.LCITY),getUniqueKey:r=>r.LCITY,renderItem:r=>e(w,{children:r.LCITY}),deduplicate:r=>[...new Map(r.map(p=>{var f;return[(f=p.LCITY)==null?void 0:f.trim(),p]})).values()]})}),e(C,{flex:"1",maxW:{base:"100%",md:"48%"},bg:"white",p:4,rounded:"xl",boxShadow:"lg",children:e(U,{ref:l,placeholder:"Search by school name...",searchFunction:R,onSelect:c,getUniqueKey:r=>`${r.NAME}-${r.CITY}`,renderItem:r=>h(w,{children:[r.NAME," \u2014 ",r.CITY,", ",r.STATE]}),deduplicate:r=>{const p=new Set;return r.filter(f=>{const b=`${f.NAME}-${f.CITY}`;return p.has(b)?!1:(p.add(b),!0)})}})})]})]}),xe=({isOpen:n,onClose:o,school:t})=>{const c=$({base:!0,md:!1});return h(V,{isOpen:n,onClose:o,size:"6xl",isCentered:!0,children:[e(Q,{}),h(J,{borderRadius:"2xl",boxShadow:"2xl",bg:"white",p:4,border:"2px solid",borderColor:"teal.200",children:[e(X,{pb:0,children:e(Y,{size:"lg",color:"teal.500",children:"\u{1F3EB} School Details"})}),e(ee,{}),e(te,{pt:4,pb:6,children:t?h(_,{direction:c?"column":"row",gap:8,align:"flex-start",wrap:"wrap",children:[h(re,{spacing:2,flex:"1",minW:"260px",children:[e(w,{fontSize:"lg",fontWeight:"semibold",children:t.NAME}),h(w,{children:[e("b",{children:"Street:"})," ",t.STREET]}),h(w,{children:[e("b",{children:"City:"})," ",t.CITY]}),h(w,{children:[e("b",{children:"State:"})," ",t.STATE]}),h(w,{children:[e("b",{children:"ZIP:"})," ",t.ZIP]})]}),t.LAT&&t.LON&&e(C,{flex:"1",minW:"300px",borderRadius:"lg",overflow:"hidden",boxShadow:"lg",border:"1px solid",borderColor:"cyan.200",children:e("iframe",{width:"100%",height:"300",style:{border:0},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://maps.google.com/maps?q=${encodeURIComponent(`${t.NAME}, ${t.STREET}, ${t.CITY}, ${t.STATE}`)}&z=15&output=embed`})})]}):e(w,{color:"red.500",fontWeight:"semibold",children:"No data available."})})]})]})},we=({schools:n})=>{const{isOpen:o,onOpen:t,onClose:c}=oe(),[s,l]=T.useState(null),[d,r]=T.useState("NAME"),[p,f]=T.useState("asc"),b=a=>{l(a),t()},g=a=>{d===a?f(u=>u==="asc"?"desc":"asc"):(r(a),f("asc"))},y=T.useMemo(()=>[...n].sort((a,u)=>{var S,I;const x=(S=a[d])!=null?S:"",i=(I=u[d])!=null?I:"";return typeof x=="number"&&typeof i=="number"?p==="asc"?x-i:i-x:p==="asc"?String(x).localeCompare(String(i)):String(i).localeCompare(String(x))}),[n,d,p]);return h(B,{children:[h(se,{variant:"simple",size:"md",width:"100%",children:[e(ne,{bg:"blue.500",children:e(j,{children:[{label:"Name",key:"NAME"},{label:"Street",key:"STREET"},{label:"District",key:"CITY"},{label:"State",key:"STATE"},{label:"ZIP",key:"ZIP"}].map(({label:a,key:u})=>e(le,{color:"white",fontSize:"md",fontWeight:"medium",letterSpacing:"wide",textTransform:"uppercase",py:3,cursor:"pointer",onClick:()=>g(u),children:h(C,{display:"flex",alignItems:"center",gap:"1",children:[a,d===u&&(p==="asc"?e(ae,{size:14}):e(ie,{size:14}))]})},u))})}),e(ce,{children:y.map((a,u)=>h(j,{onClick:()=>b(a),_hover:{bg:"blue.50",transform:"scale(1.01)"},cursor:"pointer",transition:"all 0.2s ease-in-out",children:[e(v,{fontWeight:"bold",color:"gray.700",children:a.NAME}),e(v,{children:a.STREET}),e(v,{children:a.CITY}),e(v,{children:a.STATE}),e(v,{children:a.ZIP})]},u))})]}),e(xe,{isOpen:o,onClose:c,school:s})]})},ye=({currentPage:n,totalPages:o,onNext:t,onPrev:c})=>h(de,{spacing:4,children:[e(A,{onClick:c,isDisabled:n===1,colorScheme:"blue",children:"Previous"}),h(w,{children:["Page ",n," of ",o]}),e(A,{onClick:t,isDisabled:n===o,colorScheme:"blue",children:"Next"})]}),L=10,Ce=()=>{const[n,o]=m.exports.useState(!1),[t,c]=m.exports.useState([]),[s,l]=m.exports.useState([]),[d,r]=m.exports.useState(1),[p,f]=m.exports.useState(""),b=m.exports.useRef(null),g=m.exports.useRef(null);m.exports.useEffect(()=>{(async()=>{o(!0);try{const S=await R("");c(S),l(S)}catch(S){console.error("Error fetching all schools:",S)}finally{o(!1)}})()},[]);const y=i=>{if(f(i),r(1),i==="")l(t);else{const S=t.filter(I=>{var D;return((D=I.CITY)==null?void 0:D.toLowerCase())===i.toLowerCase()});l(S)}},E=i=>{l([i]),r(1),f(i.CITY||"")},a=()=>{var i,S;l(t),f(""),r(1),(i=b.current)==null||i.reset(),(S=g.current)==null||S.reset()},u=Math.ceil(s.length/L),x=s.slice((d-1)*L,d*L);return{loading:n,currentData:x,currentPage:d,totalPages:u,setCurrentPage:r,citySearchRef:b,schoolSearchRef:g,selectedCity:p,handleCitySelect:y,handleSchoolSelect:E,resetFilters:a}},Ee=()=>{const{loading:n,currentData:o,currentPage:t,totalPages:c,setCurrentPage:s,citySearchRef:l,schoolSearchRef:d,selectedCity:r,handleCitySelect:p,handleSchoolSelect:f,resetFilters:b}=Ce();return e(C,{minH:"100vh",bgGradient:"linear(to-tr, teal.400, cyan.500)",py:{base:8,md:10},px:{base:4,md:10},children:e(O,{flexDirection:"column",w:"100%",children:h(P,{spacing:10,w:"100%",maxW:"1200px",align:"start",children:[e(Y,{color:"white",size:$({base:"lg",md:"2xl"}),textAlign:"left",w:"full",children:"\u{1F30E} U.S. Schools Directory"}),e(ge,{selectedCity:r,onReset:b,onCitySelect:p,onSchoolSelect:f,citySearchRef:l,schoolSearchRef:d}),r&&h(w,{fontSize:"lg",color:"white",children:["Showing schools for: ",e("b",{children:r})]}),e(ue,{initialScale:.9,in:!0,style:{width:"100%"},children:n?e(O,{py:20,children:e(N,{size:"xl",thickness:"4px",color:"white"})}):h(P,{spacing:8,w:"100%",bg:"white",p:6,rounded:"2xl",boxShadow:"2xl",children:[e(we,{schools:o}),e(ye,{currentPage:t,totalPages:c,onNext:()=>s(g=>g+1),onPrev:()=>s(g=>g-1)})]})})]})})})};function Te(){return e("div",{className:"App",children:e(Ee,{})})}const ve={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl",border:"2px solid"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},Ie={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},Pe={baseStyle:{bg:"white"}};var Ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:Ie,Input:Pe});const Re={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},Le=he({colors:Re,components:k({Card:ve},Ae)});pe.render(e(T.StrictMode,{children:e(fe,{theme:Le,children:e(Te,{})})}),document.getElementById("root"));
