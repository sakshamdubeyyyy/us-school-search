var W=Object.defineProperty;var L=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var D=(n,o,r)=>o in n?W(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r,F=(n,o)=>{for(var r in o||(o={}))q.call(o,r)&&D(n,r,o[r]);if(L)for(var r of L(o))H.call(o,r)&&D(n,r,o[r]);return n};import{r as p,j as i,V as v,a as e,I as K,S as M,B as C,L as G,b as N,T as g,F as k,c as I,A as Z,d as _,u as z,M as V,e as Q,f as J,g as X,H as B,h as ee,i as te,k as re,l as oe,R as $,m as se,n as ne,o as j,p as le,q as ae,s as E,t as ie,C as Y,v as ce,w as de,x as ue,y as he}from"./vendor.f0cda7f3.js";const pe=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}};pe();function fe({placeholder:n,searchFunction:o,renderItem:r,getUniqueKey:a,onSelect:s,deduplicate:l},d){const[t,u]=p.exports.useState(""),[h,S]=p.exports.useState([]),[x,w]=p.exports.useState(!1),[T,m]=p.exports.useState(!1),[b,y]=p.exports.useState(!1);return p.exports.useImperativeHandle(d,()=>({reset:()=>{u(""),S([]),m(!1),y(!1)}})),p.exports.useEffect(()=>{const c=setTimeout(async()=>{if(t.trim().length>=3&&!b){w(!0);try{let f=await o(t);l&&(f=l(f)),S(f),m(!0)}catch(f){console.error("Error in dropdown search:",f)}finally{w(!1)}}else S([]),m(!1)},300);return()=>clearTimeout(c)},[t,b,o]),i(v,{align:"stretch",position:"relative",width:"100%",children:[e(K,{placeholder:n,value:t,onChange:c=>{u(c.target.value),y(!1)},onFocus:()=>{t.length>=3&&!b&&m(!0)}}),x&&e(M,{size:"sm",mt:2}),T&&e(C,{position:"absolute",top:"100%",bg:"white",shadow:"md",border:"1px solid #ccc",borderRadius:"md",width:"100%",zIndex:10,maxHeight:"200px",overflowY:"auto",children:e(G,{spacing:0,children:h.length>0?h.map(c=>e(N,{px:3,py:2,_hover:{bg:"gray.100",cursor:"pointer"},onClick:()=>{s(c),u(a(c)),y(!0),m(!1)},children:r(c)},a(c))):e(N,{px:3,py:2,children:e(g,{children:"No results found"})})})})]})}const O=p.exports.forwardRef(fe),Se=async n=>{let o=`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=UPPER(NAME) LIKE UPPER('%${n}%')&outFields=*&outSR=4326&f=json`,r=[],a=await(await fetch(o)).json();return r=[...a.features?a.features.map(s=>s.attributes):[]],r},P=async(n,o)=>{let r=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Private_School_Locations_Current/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${n}%')${o?`%20AND%20LEAID%20%3D%20'${o}'`:""}&outFields=*&outSR=4326&f=json`,a=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Public_School_Location_201819/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${n}%')${o?`%20AND%20LEAID%20%3D%20'${o}'`:""}&outFields=*&outSR=4326&f=json`,s=[],l=await(await fetch(r)).json(),d=await(await fetch(a)).json();return s=[...l.features?l.features.map(t=>t.attributes):[],...d.features?d.features.map(t=>t.attributes):[]],s},me=({selectedCity:n,onReset:o,onCitySelect:r,onSchoolSelect:a,citySearchRef:s,schoolSearchRef:l})=>i(k,{children:[n&&e(I,{onClick:o,variant:"solid",size:"sm",colorScheme:"pink",leftIcon:e(Z,{size:18}),children:"Back to All Schools"}),i(_,{w:"100%",direction:{base:"column",md:"row"},gap:6,justify:"space-between",align:"center",children:[e(C,{flex:"1",maxW:{base:"100%",md:"48%"},bg:"white",p:4,rounded:"xl",boxShadow:"lg",children:e(O,{ref:s,placeholder:"Search by district...",searchFunction:async t=>{const[u,h]=await Promise.all([Se(t),P(t)]),S=u.map(m=>{var b;return(b=m.LCITY)==null?void 0:b.trim()}).filter(Boolean),x=h.map(m=>{var b;return(b=m.CITY)==null?void 0:b.trim()}).filter(Boolean),w=[...S,...x];return[...new Set(w)].map(m=>({LCITY:m}))},onSelect:t=>r(t.LCITY),getUniqueKey:t=>t.LCITY,renderItem:t=>e(g,{children:t.LCITY}),deduplicate:t=>[...new Map(t.map(u=>{var h;return[(h=u.LCITY)==null?void 0:h.trim(),u]})).values()]})}),e(C,{flex:"1",maxW:{base:"100%",md:"48%"},bg:"white",p:4,rounded:"xl",boxShadow:"lg",children:e(O,{ref:l,placeholder:"Search by school name...",searchFunction:P,onSelect:a,getUniqueKey:t=>`${t.NAME}-${t.CITY}`,renderItem:t=>i(g,{children:[t.NAME," \u2014 ",t.CITY,", ",t.STATE]}),deduplicate:t=>{const u=new Set;return t.filter(h=>{const S=`${h.NAME}-${h.CITY}`;return u.has(S)?!1:(u.add(S),!0)})}})})]})]}),be=({isOpen:n,onClose:o,school:r})=>{const a=z({base:!0,md:!1});return i(V,{isOpen:n,onClose:o,size:"6xl",isCentered:!0,children:[e(Q,{}),i(J,{borderRadius:"2xl",boxShadow:"2xl",bg:"white",p:4,border:"2px solid",borderColor:"teal.200",children:[e(X,{pb:0,children:e(B,{size:"lg",color:"teal.500",children:"\u{1F3EB} School Details"})}),e(ee,{}),e(te,{pt:4,pb:6,children:r?i(_,{direction:a?"column":"row",gap:8,align:"flex-start",wrap:"wrap",children:[i(re,{spacing:2,flex:"1",minW:"260px",children:[e(g,{fontSize:"lg",fontWeight:"semibold",children:r.NAME}),i(g,{children:[e("b",{children:"Street:"})," ",r.STREET]}),i(g,{children:[e("b",{children:"City:"})," ",r.CITY]}),i(g,{children:[e("b",{children:"State:"})," ",r.STATE]}),i(g,{children:[e("b",{children:"ZIP:"})," ",r.ZIP]})]}),r.LAT&&r.LON&&e(C,{flex:"1",minW:"300px",borderRadius:"lg",overflow:"hidden",boxShadow:"lg",border:"1px solid",borderColor:"cyan.200",children:e("iframe",{width:"100%",height:"300",style:{border:0},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://maps.google.com/maps?q=${encodeURIComponent(`${r.NAME}, ${r.STREET}, ${r.CITY}, ${r.STATE}`)}&z=15&output=embed`})})]}):e(g,{color:"red.500",fontWeight:"semibold",children:"No data available."})})]})]})},ge=({schools:n})=>{const{isOpen:o,onOpen:r,onClose:a}=oe(),[s,l]=$.useState(null),d=t=>{l(t),r()};return i(k,{children:[i(se,{variant:"simple",size:"md",width:"100%",children:[e(ne,{bg:"blue.500",children:e(j,{children:["Name","Street","District","State","ZIP"].map(t=>e(le,{color:"white",fontSize:"md",fontWeight:"medium",letterSpacing:"wide",textTransform:"uppercase",py:3,children:t},t))})}),e(ae,{children:n.map((t,u)=>i(j,{onClick:()=>d(t),_hover:{bg:"blue.50",transform:"scale(1.01)"},cursor:"pointer",transition:"all 0.2s ease-in-out",children:[e(E,{fontWeight:"bold",color:"gray.700",children:t.NAME}),e(E,{children:t.STREET}),e(E,{children:t.CITY}),e(E,{children:t.STATE}),e(E,{children:t.ZIP})]},u))})]}),e(be,{isOpen:o,onClose:a,school:s})]})},xe=({currentPage:n,totalPages:o,onNext:r,onPrev:a})=>i(ie,{spacing:4,children:[e(I,{onClick:a,isDisabled:n===1,colorScheme:"blue",children:"Previous"}),i(g,{children:["Page ",n," of ",o]}),e(I,{onClick:r,isDisabled:n===o,colorScheme:"blue",children:"Next"})]}),R=10,we=()=>{const[n,o]=p.exports.useState(!1),[r,a]=p.exports.useState([]),[s,l]=p.exports.useState([]),[d,t]=p.exports.useState(1),[u,h]=p.exports.useState(""),S=p.exports.useRef(null),x=p.exports.useRef(null);p.exports.useEffect(()=>{(async()=>{o(!0);try{const f=await P("");a(f),l(f)}catch(f){console.error("Error fetching all schools:",f)}finally{o(!1)}})()},[]);const w=c=>{if(h(c),t(1),c==="")l(r);else{const f=r.filter(U=>{var A;return((A=U.CITY)==null?void 0:A.toLowerCase())===c.toLowerCase()});l(f)}},T=c=>{l([c]),t(1),h(c.CITY||"")},m=()=>{var c,f;l(r),h(""),t(1),(c=S.current)==null||c.reset(),(f=x.current)==null||f.reset()},b=Math.ceil(s.length/R),y=s.slice((d-1)*R,d*R);return{loading:n,currentData:y,currentPage:d,totalPages:b,setCurrentPage:t,citySearchRef:S,schoolSearchRef:x,selectedCity:u,handleCitySelect:w,handleSchoolSelect:T,resetFilters:m}},ye=()=>{const{loading:n,currentData:o,currentPage:r,totalPages:a,setCurrentPage:s,citySearchRef:l,schoolSearchRef:d,selectedCity:t,handleCitySelect:u,handleSchoolSelect:h,resetFilters:S}=we();return e(C,{minH:"100vh",bgGradient:"linear(to-tr, teal.400, cyan.500)",py:{base:8,md:10},px:{base:4,md:10},children:e(Y,{flexDirection:"column",w:"100%",children:i(v,{spacing:10,w:"100%",maxW:"1200px",align:"start",children:[e(B,{color:"white",size:z({base:"lg",md:"2xl"}),textAlign:"left",w:"full",children:"\u{1F30E} U.S. Schools Directory"}),e(me,{selectedCity:t,onReset:S,onCitySelect:u,onSchoolSelect:h,citySearchRef:l,schoolSearchRef:d}),t&&i(g,{fontSize:"lg",color:"white",children:["Showing schools for: ",e("b",{children:t})]}),e(ce,{initialScale:.9,in:!0,style:{width:"100%"},children:n?e(Y,{py:20,children:e(M,{size:"xl",thickness:"4px",color:"white"})}):i(v,{spacing:8,w:"100%",bg:"white",p:6,rounded:"2xl",boxShadow:"2xl",children:[e(ge,{schools:o}),e(xe,{currentPage:r,totalPages:a,onNext:()=>s(x=>x+1),onPrev:()=>s(x=>x-1)})]})})]})})})};function Ce(){return e("div",{className:"App",children:e(ye,{})})}const Ee={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl",border:"2px solid"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},Te={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},ve={baseStyle:{bg:"white"}};var Ie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:Te,Input:ve});const Pe={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},Re=de({colors:Pe,components:F({Card:Ee},Ie)});ue.render(e($.StrictMode,{children:e(he,{theme:Re,children:e(Ce,{})})}),document.getElementById("root"));
