var W=Object.defineProperty;var A=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var L=(l,r,t)=>r in l?W(l,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[r]=t,D=(l,r)=>{for(var t in r||(r={}))H.call(r,t)&&L(l,t,r[t]);if(A)for(var t of A(r))q.call(r,t)&&L(l,t,r[t]);return l};import{r as u,j as c,V as v,a as e,I as K,S as F,B as y,L as G,b as M,T as S,F as N,c as I,A as Z,d as k,u as _,M as V,e as Q,f as J,g as X,H as z,h as ee,i as te,k as re,l as oe,R as $,m as se,n as ne,o as B,p as le,q as ae,s as E,t as ie,C as j,v as ce,w as de,x as ue,y as he}from"./vendor.f0cda7f3.js";const pe=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}};pe();function fe({placeholder:l,searchFunction:r,renderItem:t,getUniqueKey:i,onSelect:n,deduplicate:a},s){const[o,h]=u.exports.useState(""),[f,b]=u.exports.useState([]),[g,C]=u.exports.useState(!1),[T,m]=u.exports.useState(!1),[x,w]=u.exports.useState(!1);return u.exports.useImperativeHandle(s,()=>({reset:()=>{h(""),b([]),m(!1),w(!1)}})),u.exports.useEffect(()=>{const d=setTimeout(async()=>{if(o.trim().length>=3&&!x){C(!0);try{let p=await r(o);a&&(p=a(p)),b(p),m(!0)}catch(p){console.error("Error in dropdown search:",p)}finally{C(!1)}}else b([]),m(!1)},300);return()=>clearTimeout(d)},[o,x,r]),c(v,{align:"stretch",position:"relative",width:"100%",children:[e(K,{placeholder:l,value:o,onChange:d=>{h(d.target.value),w(!1)},onFocus:()=>{o.length>=3&&!x&&m(!0)}}),g&&e(F,{size:"sm",mt:2}),T&&e(y,{position:"absolute",top:"100%",bg:"white",shadow:"md",border:"1px solid #ccc",borderRadius:"md",width:"100%",zIndex:10,maxHeight:"200px",overflowY:"auto",children:e(G,{spacing:0,children:f.length>0?f.map(d=>e(M,{px:3,py:2,_hover:{bg:"gray.100",cursor:"pointer"},onClick:()=>{n(d),h(i(d)),w(!0),m(!1)},children:t(d)},i(d))):e(M,{px:3,py:2,children:e(S,{children:"No results found"})})})})]})}const Y=u.exports.forwardRef(fe),Se=async l=>{let r=`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=UPPER(NAME) LIKE UPPER('%${l}%')&outFields=*&outSR=4326&f=json`,t=[],i=await(await fetch(r)).json();return t=[...i.features?i.features.map(n=>n.attributes):[]],t},O=async(l,r)=>{let t=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Private_School_Locations_Current/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${l}%')${r?`%20AND%20LEAID%20%3D%20'${r}'`:""}&outFields=*&outSR=4326&f=json`,i=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Public_School_Location_201819/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${l}%')${r?`%20AND%20LEAID%20%3D%20'${r}'`:""}&outFields=*&outSR=4326&f=json`,n=[],a=await(await fetch(t)).json(),s=await(await fetch(i)).json();return n=[...a.features?a.features.map(o=>o.attributes):[],...s.features?s.features.map(o=>o.attributes):[]],n},be=({selectedCity:l,onReset:r,onCitySelect:t,onSchoolSelect:i,citySearchRef:n,schoolSearchRef:a})=>c(N,{children:[l&&e(I,{onClick:r,variant:"solid",size:"sm",colorScheme:"pink",leftIcon:e(Z,{size:18}),children:"Back to All Schools"}),c(k,{w:"100%",direction:{base:"column",md:"row"},gap:6,justify:"space-between",align:"center",children:[e(y,{flex:"1",maxW:{base:"100%",md:"48%"},bg:"white",p:4,rounded:"xl",boxShadow:"lg",children:e(Y,{ref:n,placeholder:"Search by district name...",searchFunction:Se,onSelect:s=>t(s.LCITY),getUniqueKey:s=>s.LCITY,renderItem:s=>e(S,{children:s.LCITY}),deduplicate:s=>[...new Map(s.map(o=>{var h;return[(h=o.LCITY)==null?void 0:h.trim(),o]})).values()]})}),e(y,{flex:"1",maxW:{base:"100%",md:"48%"},bg:"white",p:4,rounded:"xl",boxShadow:"lg",children:e(Y,{ref:a,placeholder:"Search by school name...",searchFunction:O,onSelect:i,getUniqueKey:s=>`${s.NAME}-${s.CITY}`,renderItem:s=>c(S,{children:[s.NAME," \u2014 ",s.CITY,", ",s.STATE]}),deduplicate:s=>{const o=new Set;return s.filter(h=>{const f=`${h.NAME}-${h.CITY}`;return o.has(f)?!1:(o.add(f),!0)})}})})]})]}),ge=({isOpen:l,onClose:r,school:t})=>{const i=_({base:!0,md:!1});return c(V,{isOpen:l,onClose:r,size:"6xl",isCentered:!0,children:[e(Q,{}),c(J,{borderRadius:"2xl",boxShadow:"2xl",bg:"white",p:4,border:"2px solid",borderColor:"teal.200",children:[e(X,{pb:0,children:e(z,{size:"lg",color:"teal.500",children:"\u{1F3EB} School Details"})}),e(ee,{}),e(te,{pt:4,pb:6,children:t?c(k,{direction:i?"column":"row",gap:8,align:"flex-start",wrap:"wrap",children:[c(re,{spacing:2,flex:"1",minW:"260px",children:[e(S,{fontSize:"lg",fontWeight:"semibold",children:t.NAME}),c(S,{children:[e("b",{children:"Street:"})," ",t.STREET]}),c(S,{children:[e("b",{children:"City:"})," ",t.CITY]}),c(S,{children:[e("b",{children:"State:"})," ",t.STATE]}),c(S,{children:[e("b",{children:"ZIP:"})," ",t.ZIP]})]}),t.LAT&&t.LON&&e(y,{flex:"1",minW:"300px",borderRadius:"lg",overflow:"hidden",boxShadow:"lg",border:"1px solid",borderColor:"cyan.200",children:e("iframe",{width:"100%",height:"300",style:{border:0},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://maps.google.com/maps?q=${encodeURIComponent(`${t.NAME}, ${t.STREET}, ${t.CITY}, ${t.STATE}`)}&z=15&output=embed`})})]}):e(S,{color:"red.500",fontWeight:"semibold",children:"No data available."})})]})]})},me=({schools:l})=>{const{isOpen:r,onOpen:t,onClose:i}=oe(),[n,a]=$.useState(null),s=o=>{a(o),t()};return c(N,{children:[c(se,{variant:"simple",size:"md",width:"100%",children:[e(ne,{bg:"blue.500",children:e(B,{children:["Name","Street","District","State","ZIP"].map(o=>e(le,{color:"white",fontSize:"md",fontWeight:"medium",letterSpacing:"wide",textTransform:"uppercase",py:3,children:o},o))})}),e(ae,{children:l.map((o,h)=>c(B,{onClick:()=>s(o),_hover:{bg:"blue.50",transform:"scale(1.01)"},cursor:"pointer",transition:"all 0.2s ease-in-out",children:[e(E,{fontWeight:"bold",color:"gray.700",children:o.NAME}),e(E,{children:o.STREET}),e(E,{children:o.CITY}),e(E,{children:o.STATE}),e(E,{children:o.ZIP})]},h))})]}),e(ge,{isOpen:r,onClose:i,school:n})]})},xe=({currentPage:l,totalPages:r,onNext:t,onPrev:i})=>c(ie,{spacing:4,children:[e(I,{onClick:i,isDisabled:l===1,colorScheme:"blue",children:"Previous"}),c(S,{children:["Page ",l," of ",r]}),e(I,{onClick:t,isDisabled:l===r,colorScheme:"blue",children:"Next"})]}),P=10,we=()=>{const[l,r]=u.exports.useState(!1),[t,i]=u.exports.useState([]),[n,a]=u.exports.useState([]),[s,o]=u.exports.useState(1),[h,f]=u.exports.useState(""),b=u.exports.useRef(null),g=u.exports.useRef(null);u.exports.useEffect(()=>{(async()=>{r(!0);try{const p=await O("");i(p),a(p)}catch(p){console.error("Error fetching all schools:",p)}finally{r(!1)}})()},[]);const C=d=>{if(f(d),o(1),d==="")a(t);else{const p=t.filter(U=>{var R;return((R=U.CITY)==null?void 0:R.toLowerCase())===d.toLowerCase()});a(p)}},T=d=>{a([d]),o(1),f(d.CITY||"")},m=()=>{var d,p;a(t),f(""),o(1),(d=b.current)==null||d.reset(),(p=g.current)==null||p.reset()},x=Math.ceil(n.length/P),w=n.slice((s-1)*P,s*P);return{loading:l,currentData:w,currentPage:s,totalPages:x,setCurrentPage:o,citySearchRef:b,schoolSearchRef:g,selectedCity:h,handleCitySelect:C,handleSchoolSelect:T,resetFilters:m}},ye=()=>{const{loading:l,currentData:r,currentPage:t,totalPages:i,setCurrentPage:n,citySearchRef:a,schoolSearchRef:s,selectedCity:o,handleCitySelect:h,handleSchoolSelect:f,resetFilters:b}=we();return e(y,{minH:"100vh",bgGradient:"linear(to-tr, teal.400, cyan.500)",py:{base:8,md:10},px:{base:4,md:10},children:e(j,{flexDirection:"column",w:"100%",children:c(v,{spacing:10,w:"100%",maxW:"1200px",align:"start",children:[e(z,{color:"white",size:_({base:"lg",md:"2xl"}),textAlign:"left",w:"full",children:"\u{1F30E} U.S. Schools Directory"}),e(be,{selectedCity:o,onReset:b,onCitySelect:h,onSchoolSelect:f,citySearchRef:a,schoolSearchRef:s}),o&&c(S,{fontSize:"lg",color:"white",children:["Showing schools for: ",e("b",{children:o})]}),e(ce,{initialScale:.9,in:!0,style:{width:"100%"},children:l?e(j,{py:20,children:e(F,{size:"xl",thickness:"4px",color:"white"})}):c(v,{spacing:8,w:"100%",bg:"white",p:6,rounded:"2xl",boxShadow:"2xl",children:[e(me,{schools:r}),e(xe,{currentPage:t,totalPages:i,onNext:()=>n(g=>g+1),onPrev:()=>n(g=>g-1)})]})})]})})})};function Ee(){return e("div",{className:"App",children:e(ye,{})})}const Ce={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl",border:"2px solid"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},Te={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},ve={baseStyle:{bg:"white"}};var Ie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:Te,Input:ve});const Pe={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},Re=de({colors:Pe,components:D({Card:Ce},Ie)});ue.render(e($.StrictMode,{children:e(he,{theme:Re,children:e(Ee,{})})}),document.getElementById("root"));
